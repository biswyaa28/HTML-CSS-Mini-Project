/* ═══════════════════════════════════════════════════════════
   LASER DEFENDER — Main Stylesheet
   Retro arcade space-shooter with VHS glitch transitions,
   screen shake, boot sequence & custom retro cursor.

   Architecture overview:
   1. Reset & Custom Properties (design tokens)
   2. Base body (checkerboard bg, scanlines, star field)
   3. Custom cursor system (3 SVG states)
   4. Click ripple animation
   5. Utility classes
   6. SPA page-section transitions
   7. Boot screen (BIOS sequence)
   8. VHS glitch effect (page transitions)
   9. Screen shake (game hit feedback)
   10. Navigation bar (fixed, backdrop-blur, animated underline)
   11. Pixel components (headers, terminal, buttons)
   12. Content sections (stats, quests, controls, about, leaderboard, achievements)
   13. Footer
   14. Decorative elements
   15. Keyframe animations
   16. Game engine UI (canvas, HUD, overlays)
   17. Responsive breakpoints (768px / 640px / 480px)
   18. Custom scrollbar
   ═══════════════════════════════════════════════════════════ */

/* ─── Reset ───
   Universal reset strips browser default margins and padding so every
   element starts from a clean slate.

   box-sizing: border-box is critical — it makes width/height INCLUDE
   padding and border in the total size. Without it, a 100px-wide box
   with 10px padding would actually occupy 120px. With border-box,
   padding is subtracted from the content area instead, keeping the box
   at exactly 100px. This prevents layout overflow bugs everywhere. */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* ─── CSS Custom Properties (Design Tokens) ───
   Naming convention follows Minecraft ore/material tiers:
     - dirt   = darkest purple-gray backgrounds (common, everywhere)
     - stone  = mid-tone gray-purple borders and muted text
     - iron   = light text / foreground (refined, valuable)
     - gold   = primary accent for highlights, scores, titles
     - emerald = success/positive accent (health, buttons, CTA)
     - redstone = danger/warning accent (lives, damage, errors)

   Each "material" has -dark and -light variants for 3D border effects
   (top-left highlight vs. bottom-right shadow) that create the pixel-art
   beveled look used throughout the UI.

   The remaining palette colors (cyan, magenta, yellow, lavender, mint,
   peach, pink, blue) are used for accent variety — quest card borders,
   decorations, and UI value readouts. */
:root {
    --dirt: #2d2438; /* Base dark background */
    --dirt-dark: #1e1830; /* Deepest shadow / page bg tint */
    --dirt-light: #3f3550; /* Slightly lifted panels */
    --stone: #9e95a8; /* Mid-tone borders, scrollbar thumb */
    --stone-dark: #6e6580; /* Border shadows, dividers */
    --stone-light: #c4b8d0; /* Muted body text, labels */
    --iron: #d4cce0; /* Primary light text color */
    --gold: #f0c85a; /* Primary accent — scores, titles, highlights */
    --emerald: #7ec8a0; /* Success accent — buttons, health, positive */
    --emerald-dark: #5fa880; /* Emerald border shadow */
    --emerald-light: #a2dbb8; /* Emerald highlight */
    --redstone: #e88d8d; /* Danger accent — lives, warnings, damage */
    --cyan: #89d4cf; /* Secondary accent — links, info, time */
    --magenta: #d4a0d8; /* Tertiary accent — wave counter */
    --yellow: #f5e6a3; /* Warm highlight, warning text */
    --yellow-dark: #e0cc80; /* Yellow border shadow */
    --lavender: #c4b7eb; /* Soft purple accent — landing title, cards */
    --mint: #98d8c8; /* Fresh green — terminal dots, prompts */
    --peach: #f7c5a8; /* Warm accent — subtitles, tags */
    --pink: #f0b6c5; /* Soft accent — card borders */
    --blue: #a8d4f0; /* Cool accent — card borders, star tints */
}

/* ─── Base Body ───
   Tiled checkerboard background, starfield parallax layer,
   and horizontal scanlines pseudo-element.

   CHECKERBOARD TECHNIQUE:
   Two identical 45deg gradients are layered on top of each other.
   Each gradient creates a pattern of colored squares at the 25%/75%
   color-stop boundaries. The trick is in background-position: the
   second gradient is offset by half the tile size (8px 8px) so its
   filled squares land exactly where the first gradient's transparent
   gaps are. Together they form a seamless diagonal checkerboard.

   The very low alpha (0.04) keeps it subtle — just enough texture
   to break up the flat dark background without distracting from content.

   padding-top: 52px reserves space for the fixed nav bar so content
   doesn't hide behind it on load. */
body {
    font-family: "VT323", monospace; /* Google Font — retro terminal look */
    background-color: #12101c; /* Deep space purple-black base */
    background-image:
        /* First checkerboard layer — squares at default position */
        linear-gradient(
            45deg,
            rgba(100, 80, 140, 0.04) 25%,
            /* Colored square: top-left triangle */ transparent 25%,
            /* Gap begins */ transparent 75%,
            /* Gap ends */ rgba(100, 80, 140, 0.04) 75%
                /* Colored square: bottom-right triangle */
        ),
        /* Second checkerboard layer — offset by half a tile to fill the gaps */
        linear-gradient(
                45deg,
                rgba(100, 80, 140, 0.04) 25%,
                transparent 25%,
                transparent 75%,
                rgba(100, 80, 140, 0.04) 75%
            );
    background-size: 16px 16px; /* Each tile is 16x16 — pixel-art scale */
    background-position:
        0 0,
        /* Layer 1: default origin */ 8px 8px; /* Layer 2: offset by half tile size */
    color: #e8e0f0; /* Default text: light lavender-white */
    min-height: 100vh; /* Fill at least the full viewport */
    padding-top: 52px; /* Space for the fixed nav bar height */
}

/* Scanline overlay — CRT monitor horizontal lines
   TECHNIQUE: repeating-linear-gradient creates an infinitely tiling
   pattern of alternating stripes:
     - 0 to 2px: semi-transparent black (the dark scanline)
     - 2px to 4px: fully transparent (the gap between lines)
   This 4px cycle repeats across the entire viewport, producing the
   characteristic horizontal banding of old CRT/TV monitors.

   position: fixed + inset: 0 = covers the entire viewport at all times.
   pointer-events: none = clicks pass through to content underneath.
   z-index: 9998 = sits above almost everything (just below the boot
   screen at 100000) so the scanline effect is visible over all content
   including the nav bar. */
body::before {
    content: "";
    position: fixed;
    inset: 0; /* Shorthand for top/right/bottom/left: 0 */
    background: repeating-linear-gradient(
        0deg,
        /* Vertical direction = horizontal lines */ rgba(0, 0, 0, 0.06) 0 2px,
        /* Dark scanline band: 2px tall */ transparent 2px 4px
            /* Transparent gap: 2px tall */
    );
    pointer-events: none; /* Non-interactive overlay */
    z-index: 9998; /* Above all content except boot screen */
}

/* Parallax star field — scrolls vertically on infinite loop
   TECHNIQUE: Each radial-gradient acts as a single "star" — a tiny
   circle (1px or 2px) placed at a specific percentage position using
   the "at X% Y%" syntax. The gradient goes from a colored center to
   transparent, creating a soft dot. Stacking 12 of these on one
   element places 12 stars at different positions and colors.

   The element is 200% viewport height (twice as tall as the screen).
   The starScroll animation translates it upward by -50% (exactly one
   viewport height) over 60 seconds, then loops. Because the pattern
   is distributed across the full 200% height, the second half
   scrolls into view seamlessly as the first half exits — creating
   a perfect infinite scrolling starfield with no visible seam.

   Different star sizes (1px vs 2px) and opacities (0.4-0.8) create
   a sense of depth/parallax — brighter/larger stars feel closer.

   Colors are drawn from the palette: lavender, mint, pink, blue,
   yellow, peach — matching the overall theme.

   z-index: -1 places stars behind all content.
   will-change: transform hints to the browser to GPU-accelerate
   the animation for smooth 60fps scrolling. */
body::after {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 200%; /* 2x viewport height for seamless scroll loop */
    background-image:
        /* Star 1 — lavender, top-left region */
        radial-gradient(
            1px 1px at 10% 15%,
            rgba(196, 183, 235, 0.8) 50%,
            transparent 100%
        ),
        /* Star 2 — mint, upper-left */
        radial-gradient(
                1px 1px at 20% 35%,
                rgba(152, 216, 200, 0.6) 50%,
                transparent 100%
            ),
        /* Star 3 — pink, 2px (brighter/closer), center-left */
        radial-gradient(
                2px 2px at 30% 55%,
                rgba(240, 182, 197, 0.7) 50%,
                transparent 100%
            ),
        /* Star 4 — blue, lower-left */
        radial-gradient(
                1px 1px at 40% 75%,
                rgba(168, 212, 240, 0.5) 50%,
                transparent 100%
            ),
        /* Star 5 — yellow, top-center */
        radial-gradient(
                1px 1px at 50% 10%,
                rgba(245, 230, 163, 0.6) 50%,
                transparent 100%
            ),
        /* Star 6 — lavender, 2px, center */
        radial-gradient(
                2px 2px at 60% 45%,
                rgba(196, 183, 235, 0.5) 50%,
                transparent 100%
            ),
        /* Star 7 — peach, center-right */
        radial-gradient(
                1px 1px at 70% 65%,
                rgba(247, 197, 168, 0.6) 50%,
                transparent 100%
            ),
        /* Star 8 — mint, dim, lower-right */
        radial-gradient(
                1px 1px at 80% 85%,
                rgba(152, 216, 200, 0.4) 50%,
                transparent 100%
            ),
        /* Star 9 — pink, upper-right */
        radial-gradient(
                1px 1px at 90% 25%,
                rgba(240, 182, 197, 0.5) 50%,
                transparent 100%
            ),
        /* Star 10 — blue, mid-left */
        radial-gradient(
                1px 1px at 15% 50%,
                rgba(168, 212, 240, 0.5) 50%,
                transparent 100%
            ),
        /* Star 11 — lavender, 2px, lower-left */
        radial-gradient(
                2px 2px at 25% 80%,
                rgba(196, 183, 235, 0.6) 50%,
                transparent 100%
            ),
        /* Star 12 — yellow, center */
        radial-gradient(
                1px 1px at 45% 40%,
                rgba(245, 230, 163, 0.5) 50%,
                transparent 100%
            );
    pointer-events: none; /* Stars are purely decorative */
    z-index: -1; /* Behind all page content */
    animation: starScroll 60s linear infinite; /* Slow upward drift */
    will-change: transform; /* GPU-accelerate for smooth animation */
}

/* ─── Custom Retro Cursor System ───
   Replaces the default OS cursor with a pixel-art crosshair rendered as
   inline SVG data URIs. Three states provide visual feedback:

   STATE 1 — DEFAULT (green crosshair, gold center dot):
   Applied to *, *::before, *::after so it covers literally everything.
   The SVG draws 4 green rectangles (crosshair arms) + 1 gold center square.
   The "12 12" after the URL sets the hotspot to the center of the 24x24 SVG.
   "crosshair" is the CSS fallback if the SVG fails to load.
   !important overrides any cursor:pointer that browsers add to <a> tags.

   STATE 2 — INTERACTIVE (gold crosshair, red center dot):
   Applied to clickable elements. Color shift from green to gold signals
   "this is interactive." The long selector list ensures coverage of all
   custom components, not just native <a>/<button> elements.

   STATE 3 — ACTIVE/PRESSED (contracted gold crosshair, red center):
   The crosshair arms are shorter (start at 4px instead of 0, end at 20px
   instead of 24px), creating a "squeezed" visual that feels like a click. */

/* State 1: Default cursor — emerald green crosshair with gold center */
*,
*::before,
*::after {
    cursor:
        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><rect x="11" y="0" width="2" height="8" fill="%237ec8a0"/><rect x="11" y="16" width="2" height="8" fill="%237ec8a0"/><rect x="0" y="11" width="8" height="2" fill="%237ec8a0"/><rect x="16" y="11" width="8" height="2" fill="%237ec8a0"/><rect x="10" y="10" width="4" height="4" fill="%23f0c85a"/></svg>')
            12 12,
        crosshair !important;
}
/* State 2: Interactive cursor — gold crosshair with redstone center
   Selector covers all interactive elements: native HTML controls,
   custom buttons, nav items, cards, and game UI components. */
a,
button,
[role="button"],
input,
select,
textarea,
.action-btn,
.go-btn,
.diff-btn,
.terminal-dot,
.nav-hamburger,
.nav-links a,
.nav-logo,
.footer-links a,
.scroll-top-btn,
.quest-card,
.stat-card,
.tech-card,
.control-panel,
.achievement-badge {
    cursor:
        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><rect x="11" y="0" width="2" height="8" fill="%23f0c85a"/><rect x="11" y="16" width="2" height="8" fill="%23f0c85a"/><rect x="0" y="11" width="8" height="2" fill="%23f0c85a"/><rect x="16" y="11" width="8" height="2" fill="%23f0c85a"/><rect x="10" y="10" width="4" height="4" fill="%23e88d8d"/></svg>')
            12 12,
        pointer !important;
}
/* State 3: Active/pressed — contracted crosshair for "pressed" feedback.
   Arms start at 4px instead of 0px and are shorter (6px vs 8px),
   so the crosshair appears to squeeze inward on click. */
*:active {
    cursor:
        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><rect x="11" y="4" width="2" height="6" fill="%23f0c85a"/><rect x="11" y="14" width="2" height="6" fill="%23f0c85a"/><rect x="4" y="11" width="6" height="2" fill="%23f0c85a"/><rect x="14" y="11" width="6" height="2" fill="%23f0c85a"/><rect x="10" y="10" width="4" height="4" fill="%23e88d8d"/></svg>')
            12 12,
        crosshair !important;
}

/* Click ripple — pixel "+" burst that appears at the mouse click position.
   Created dynamically by JavaScript and placed at cursor coordinates.
   Uses ::before (vertical bar) and ::after (horizontal bar) to form a
   crosshair/plus shape. The clickBurst keyframe scales it up from 0.3x
   to 1.8x while fading out, creating an expanding burst effect.

   position: fixed ensures it stays at the click point regardless of scroll.
   pointer-events: none prevents it from blocking subsequent clicks.
   z-index: 99999 ensures visibility above everything except the boot screen.
   "forwards" keeps the element at opacity:0 after animation ends (then JS
   removes it from the DOM). */
.click-ripple {
    position: fixed;
    width: 24px;
    height: 24px;
    pointer-events: none; /* Decorative only — no interaction */
    z-index: 99999;
    animation: clickBurst 0.35s ease-out forwards;
}
/* Both pseudo-elements share emerald color for the "+" shape */
.click-ripple::before,
.click-ripple::after {
    content: "";
    position: absolute;
    background: var(--emerald);
}
/* Vertical bar of the "+" */
.click-ripple::before {
    top: 0;
    left: 50%;
    width: 2px;
    height: 100%;
    transform: translateX(-50%);
}
/* Horizontal bar of the "+" */
.click-ripple::after {
    left: 0;
    top: 50%;
    width: 100%;
    height: 2px;
    transform: translateY(-50%);
}
/* Expand outward and fade to zero over 350ms.
   translate(-50%, -50%) keeps the burst centered on the click point
   (the element is positioned at cursor coords by JS). */
@keyframes clickBurst {
    0% {
        transform: translate(-50%, -50%) scale(0.3);
        opacity: 1;
    }
    100% {
        transform: translate(-50%, -50%) scale(1.8);
        opacity: 0;
    }
}

/* ─── Utility Classes ───
   Small, single-purpose helpers applied directly in HTML to avoid
   repeating common one-line declarations. Naming follows a simplified
   BEM/Tailwind convention: .text-{color}, .mt-{size}, .mb-{size}. */
.text-center {
    text-align: center;
}
.text-muted {
    color: var(--stone-light);
}
.text-gold {
    color: var(--gold);
}
.text-cyan {
    color: var(--cyan);
}
.text-emerald {
    color: var(--emerald);
}
.text-lavender {
    color: var(--lavender);
}
.mt-3 {
    margin-top: 3rem;
}
.mb-1 {
    margin-bottom: 1rem;
}

/* ─── SPA Page Section Transitions ───
   This site works as a Single Page Application: all "pages" (home, game,
   leaderboard, about) are <section> elements in the same HTML document.
   JavaScript toggles the .active class to show/hide them.

   HIDDEN STATE (no .active class):
   display: none removes the section from layout entirely — it occupies
   no space and is invisible. opacity: 0 and the transform are set here
   so they are ready as starting values for the entrance animation.

   VISIBLE STATE (.active class):
   display: block brings it back into the document flow.
   The morphIn animation handles the actual entrance — sliding up 20px,
   scaling from 0.98 to 1, and fading in over 0.6s.

   NOTE: CSS transitions do NOT work with display:none/block changes
   (the browser skips the transition when toggling display). That is why
   a @keyframes animation (morphIn) is used instead of relying on the
   transition property alone. The transition is kept as a fallback for
   any dynamic opacity/transform changes after the initial entrance.

   The cubic-bezier(0.22, 1, 0.36, 1) is an "ease-out-expo" curve —
   fast start that gently decelerates, giving a snappy but smooth feel. */
.page-section {
    display: none;
    opacity: 0;
    transform: translateY(20px) scale(0.98);
    transition:
        opacity 0.5s ease,
        transform 0.5s ease;
}
.page-section.active {
    display: block;
    opacity: 1;
    transform: translateY(0) scale(1);
    animation: morphIn 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

/* ═══════════════════════════════════════════════
   BOOT SCREEN — Fake BIOS boot sequence
   A full-screen green-on-black overlay that simulates a DOS/BIOS POST
   (Power-On Self-Test) before revealing the actual site. JavaScript
   sequentially appends <p> elements with boot messages (memory check,
   driver loading, etc.) then fades the overlay out.

   z-index: 100000 = highest in the entire stylesheet. It must sit above
   the scanline overlay (9998), nav bar (9999), and everything else.

   Lifecycle managed by JS:
   1. Visible on load (default styles)
   2. JS adds .fade-out class -> opacity transitions to 0
   3. After transition, JS adds .hidden -> display: none removes it
   ═══════════════════════════════════════════════ */
#bootScreen {
    position: fixed;
    inset: 0; /* Full viewport coverage */
    z-index: 100000; /* Above absolutely everything */
    background: #000; /* Pure black — classic BIOS look */
    color: #33ff33; /* Phosphor green terminal text */
    font-family: "VT323", "Courier New", monospace;
    font-size: 1.2rem;
    padding: 2rem;
    overflow: hidden; /* No scroll on the boot screen */
    display: flex;
    align-items: flex-start; /* Text starts from top-left, like real BIOS */
    transition: opacity 0.6s ease; /* Smooth fade when .fade-out is added */
}
/* Fade-out state: visually hidden but still in DOM for the transition */
#bootScreen.fade-out {
    opacity: 0;
    pointer-events: none; /* Prevent interaction during fade */
}
/* Final hidden state: removed from layout entirely after fade completes */
#bootScreen.hidden {
    display: none;
}
/* Each boot line starts invisible and fades in quickly (150ms).
   JS sets animation-delay on each <p> to stagger them sequentially,
   simulating text appearing line by line like a real boot log. */
#bootLines p {
    margin: 0.3rem 0;
    opacity: 0;
    animation: bootLineIn 0.15s ease forwards;
}
/* Simple opacity fade from 0 to 1 */
@keyframes bootLineIn {
    to {
        opacity: 1;
    }
}

/* ═══════════════════════════════════════════════
   VHS GLITCH — Page transition effect
   Applied briefly to <body> by JS during navigateTo() when switching
   between SPA sections. Simulates the look of a VHS tape glitching
   during a channel change or tracking error.

   Two effects work together:
   1. vhsGlitch animation on the body itself — creates RGB split
   2. trackingLines animation on body::before — sweeping horizontal bars

   The class is added, plays for 300ms, then JS removes it.
   ═══════════════════════════════════════════════ */
.vhs-glitch {
    animation: vhsGlitch 0.3s ease-in-out;
}
/* Tracking line overlay: semi-transparent white horizontal bars sweep
   from above the viewport to below it during the transition, mimicking
   the horizontal noise bands seen on paused/tracking VHS tapes. */
.vhs-glitch::before {
    content: "";
    position: fixed;
    inset: 0;
    z-index: 99996; /* Above content, below scanlines/cursor */
    pointer-events: none;
    animation: trackingLines 0.3s linear;
    background: repeating-linear-gradient(
        0deg,
        transparent 0 4px,
        /* 4px transparent gap */ rgba(255, 255, 255, 0.03) 4px 8px
            /* 4px faint white bar */
    );
}

/* RGB SPLIT EFFECT — Simulates chromatic aberration / color channel
   misalignment found on damaged VHS tapes and CRT monitors.
   Each keyframe offsets red (#ff0040) and cyan (#00ffff) text-shadows
   in opposite horizontal directions, creating the classic "RGB split."
   The offset values alternate in sign and magnitude for a jittery,
   unstable feel. Returns to text-shadow:none at 100% for clean exit. */
@keyframes vhsGlitch {
    0% {
        filter: none;
    }
    20% {
        filter: none;
        text-shadow:
            -3px 0 #ff0040,
            3px 0 #00ffff;
    }
    40% {
        filter: none;
        text-shadow:
            2px 0 #ff0040,
            -2px 0 #00ffff;
    }
    60% {
        filter: none;
        text-shadow:
            -1px 0 #ff0040,
            1px 0 #00ffff;
    }
    80% {
        filter: none;
        text-shadow:
            3px 0 #ff0040,
            -3px 0 #00ffff;
    }
    100% {
        filter: none;
        text-shadow: none;
    }
}

/* TRACKING LINES SWEEP — Moves the repeating stripe pattern from
   -100vh (entirely above viewport) to +100vh (entirely below),
   creating the illusion of horizontal noise bars sweeping downward
   across the screen, like adjusting the tracking knob on a VCR. */
@keyframes trackingLines {
    0% {
        background-position: 0 -100vh;
    }
    100% {
        background-position: 0 100vh;
    }
}

/* ═══════════════════════════════════════════════
   SCREEN SHAKE — Applied to the game container when the player takes
   damage. JS adds the .screen-shake class, the animation plays for
   200ms, then JS removes it. Can also be triggered by explosions.

   The keyframes rapidly jitter the element in random-looking X/Y
   offsets (3px magnitude) that alternate direction each step, creating
   a convincing earthquake/impact effect. The small pixel distances
   keep it from feeling disorienting. Returns to (0,0) at 100% so
   there is no layout shift after the shake ends.
   ═══════════════════════════════════════════════ */
.screen-shake {
    animation: screenShake 0.2s ease-in-out;
}
@keyframes screenShake {
    0% {
        transform: translate(0, 0);
    } /* Start: neutral */
    15% {
        transform: translate(3px, -2px);
    } /* Jolt upper-right */
    30% {
        transform: translate(-3px, 2px);
    } /* Snap lower-left */
    45% {
        transform: translate(2px, 3px);
    } /* Push lower-right */
    60% {
        transform: translate(-2px, -3px);
    } /* Kick upper-left */
    75% {
        transform: translate(3px, 1px);
    } /* Drift right */
    100% {
        transform: translate(0, 0);
    } /* Settle back to origin */
}

/* ═══════════════════════════════════════════════
   NAVIGATION BAR
   Fixed top bar with logo, links, and hamburger.

   Design decisions:
   - position: fixed keeps it visible during scroll
   - backdrop-filter: blur(6px) lets the background bleed through
     with a frosted glass effect, so it feels layered not opaque
   - z-index: 9999 sits just below the scanline overlay (9998 is
     actually lower, but the scanline is pointer-events:none anyway)
   - The 4px border-bottom mimics a pixel-art divider line
   - On hover, a soft lavender glow (box-shadow) appears as feedback
   ═══════════════════════════════════════════════ */
.retro-nav {
    position: fixed; /* Stays at top during scroll */
    top: 0;
    left: 0;
    right: 0;
    z-index: 9999; /* Above page content, below scanlines */
    background: rgba(26, 22, 40, 0.95); /* 95% opaque — slight transparency */
    border-bottom: 4px solid var(--stone-dark); /* Pixel-art bottom edge */
    backdrop-filter: blur(6px); /* Frosted glass blur on content behind */
    transition: box-shadow 0.3s ease;
}
/* Soft glow on hover for subtle interactivity feedback */
.retro-nav:hover {
    box-shadow: 0 4px 20px rgba(196, 183, 235, 0.15);
}
/* Centered inner wrapper constrains content width on large screens */
.nav-inner {
    max-width: 1100px;
    margin: 0 auto; /* Center horizontally */
    display: flex;
    align-items: center;
    justify-content: space-between; /* Logo left, links right */
    padding: 0 1rem;
}

/* Logo — uses "Press Start 2P" for an 8-bit arcade font feel.
   The colorMorph animation (defined elsewhere or in JS) slowly cycles
   the logo color for an eye-catching idle effect. */
.nav-logo {
    font-family: "Press Start 2P", cursive;
    font-size: 0.7rem;
    color: var(--emerald);
    text-decoration: none;
    padding: 0.8rem 0;
    text-shadow: 2px 2px 0 var(--dirt-dark); /* Pixel offset shadow */
    white-space: nowrap; /* Prevent logo text from wrapping */
    transition:
        color 0.4s ease,
        text-shadow 0.4s ease,
        transform 0.2s;
    animation: colorMorph 8s ease-in-out infinite;
}
/* Hover: shift to cyan with a glow halo + slight scale-up */
.nav-logo:hover {
    color: var(--cyan);
    transform: scale(1.05);
    text-shadow:
        2px 2px 0 var(--dirt-dark),
        0 0 12px rgba(137, 212, 207, 0.5); /* Soft cyan glow */
}

/* Nav links — horizontal row separated by left-border "dividers."
   gap: 0 removes space between items; the border-left on each <a>
   acts as the visual separator instead. */
.nav-links {
    display: flex;
    gap: 0;
    list-style: none;
    flex-wrap: wrap;
}
.nav-links a {
    font-family: "VT323", monospace;
    font-size: 1.1rem;
    color: var(--stone-light);
    text-decoration: none;
    padding: 0.8rem 1rem;
    display: block;
    border-left: 2px solid var(--stone-dark); /* Vertical divider between links */
    transition: all 0.25s cubic-bezier(0.22, 1, 0.36, 1);
    text-transform: uppercase;
    letter-spacing: 1px;
    position: relative; /* Needed for the ::before underline */
    overflow: hidden; /* Clips the underline during animation */
}
/* ANIMATED UNDERLINE TECHNIQUE:
   A ::before pseudo-element is placed at the bottom of the link with
   width: 0 and left: 50% (centered). On hover/active, it expands to
   width: 100% and left: 0, creating a "grow from center" effect.
   This is smoother than using border-bottom or text-decoration because
   we can transition the width and position independently. */
.nav-links a::before {
    content: "";
    position: absolute;
    bottom: 0;
    left: 50%; /* Start centered (invisible at width:0) */
    width: 0; /* Hidden by default */
    height: 2px;
    background: var(--gold); /* Gold underline accent */
    transition:
        width 0.3s ease,
        left 0.3s ease;
}
/* On hover or when JS marks a link as .active (current page),
   the underline expands from center to full width */
.nav-links a:hover::before,
.nav-links a.active::before {
    width: 100%;
    left: 0;
}

/* Mobile hamburger toggle — hidden by default on desktop.
   Shown via media query at 640px breakpoint. The icon character
   (likely an "=" or unicode hamburger) is set in HTML. */
.nav-hamburger {
    display: none; /* Hidden on desktop */
    background: none;
    border: 2px solid var(--stone-dark);
    color: var(--gold);
    font-family: "VT323", monospace;
    font-size: 2rem;
    cursor: pointer;
    padding: 0.1rem 0.6rem;
    line-height: 1.2;
}
.nav-hamburger:hover {
    color: var(--emerald);
    border-color: var(--emerald);
}

/* ── GitHub Dropdown ── */
.nav-github-dropdown {
    position: relative;
    display: flex;
    align-items: center;
    border-left: 2px solid var(--stone-dark);
}
.nav-github-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    font-family: "VT323", monospace;
    font-size: 1.1rem;
    color: var(--stone-light);
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.8rem 1rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition:
        color 0.2s,
        background 0.2s;
    white-space: nowrap;
}
.nav-github-btn:hover,
.nav-github-dropdown.open .nav-github-btn {
    color: var(--gold);
    background: rgba(240, 200, 90, 0.08);
}
.github-menu {
    display: none;
    position: absolute;
    top: 100%;
    right: 0;
    min-width: 160px;
    background: rgba(26, 22, 40, 0.98);
    border: 2px solid var(--stone-dark);
    border-top: none;
    z-index: 10000;
    flex-direction: column;
    box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.4);
}
.nav-github-dropdown.open .github-menu {
    display: flex;
}
.github-link {
    display: flex;
    align-items: center;
    gap: 8px;
    font-family: "VT323", monospace;
    font-size: 1.1rem;
    color: var(--stone-light);
    text-decoration: none;
    padding: 0.65rem 1rem;
    border-bottom: 1px solid rgba(110, 101, 128, 0.35);
    transition:
        color 0.15s,
        background 0.15s;
    white-space: nowrap;
}
.github-link:last-child {
    border-bottom: none;
}
.github-link:hover {
    color: var(--gold);
    background: rgba(240, 200, 90, 0.1);
}
.github-link svg {
    flex-shrink: 0;
    opacity: 0.7;
}

/* Mobile: flatten dropdown into the hamburger menu */
@media (max-width: 640px) {
    .nav-github-dropdown {
        border-left: none;
        border-top: 1px solid var(--stone-dark);
        width: 100%;
        flex-direction: column;
        align-items: stretch;
    }
    .nav-github-btn {
        justify-content: center;
        width: 100%;
    }
    .github-menu {
        position: static;
        border: none;
        border-top: 1px solid rgba(110, 101, 128, 0.35);
        background: rgba(0, 0, 0, 0.2);
        box-shadow: none;
    }
    .github-link {
        justify-content: center;
    }
}

/* ─── Layout Container ───
   Centers page content with a max-width cap for readability on wide
   monitors. The 1rem horizontal padding provides breathing room on
   mobile so content doesn't touch screen edges. */
.page-container {
    max-width: 1000px;
    margin: 0 auto; /* Center horizontally */
    padding: 2rem 1rem;
}

/* ═══════════════════════════════════════════════
   PIXEL COMPONENTS — Reusable styled elements
   Shared visual building blocks used across multiple pages.
   ═══════════════════════════════════════════════ */

/* Section header with diagonal stripe background.
   The ::before pseudo-element creates a 45-degree hatched pattern
   (4px dark stripes / 4px transparent gaps) that extends 8px beyond
   the element in all directions (inset: -8px). At 50% opacity it
   provides a subtle "worn paper" or pixel-grid texture behind titles
   without overpowering the text. z-index: -1 keeps it behind content. */
.pixel-header {
    position: relative; /* Establishes stacking context for ::before */
    text-align: center;
    padding: 2rem 1rem;
}
.pixel-header::before {
    content: "";
    position: absolute;
    inset: -8px; /* Extends 8px outside the parent box */
    background: repeating-linear-gradient(
        45deg,
        var(--dirt-dark) 0 4px,
        /* Dark stripe */ transparent 4px 8px /* Transparent gap */
    );
    z-index: -1; /* Behind the header text */
    opacity: 0.5; /* Subtle, not overpowering */
}
.pixel-title {
    font-family: "Press Start 2P", cursive;
    font-size: 1.5rem;
    color: var(--cyan);
    text-shadow: 3px 3px 0 var(--dirt-dark);
    margin-bottom: 1.5rem;
    text-transform: uppercase;
    letter-spacing: 2px;
}
.pixel-title--lg {
    font-size: 2rem;
}
.pixel-text {
    font-size: 1.3rem;
    line-height: 1.6;
    color: #ddd;
    text-shadow: 1px 1px 0 #000;
}
.warning {
    color: var(--yellow);
    display: block;
    margin-top: 1rem;
}

/* ═══════════════════════════════════════════════
   HERO / TERMINAL WINDOW
   Landing page terminal with typewriter effect.
   Mimics a macOS-style terminal window with title bar dots,
   command prompt, and a typewriter animation area.
   ═══════════════════════════════════════════════ */
.hero {
    text-align: center;
    margin-bottom: 3rem;
}
/* Decoration row: holds the pixel-art tile patterns (deco-1 through deco-5) */
.hero-decoration {
    display: flex;
    justify-content: center;
    gap: 2rem;
    flex-wrap: wrap; /* Wraps on narrow screens */
    margin: 2rem 0;
}
/* image-rendering: pixelated preserves crisp edges on scaled-up
   pixel art, preventing the browser's default bilinear smoothing. */
.pixel-decoration {
    width: 64px;
    height: 64px;
    image-rendering: pixelated;
}
/* Terminal window card — mimics a macOS/Linux terminal app.
   The double box-shadow creates: (1) a deep drop shadow for depth,
   (2) a 1px subtle lavender outline for definition against the dark bg. */
.terminal-window {
    background: rgba(20, 16, 30, 0.85); /* Semi-transparent dark */
    border: 3px solid var(--stone-dark);
    border-radius: 12px; /* Rounded corners like a real window */
    overflow: hidden; /* Clips child content to rounded corners */
    max-width: 700px;
    margin: 0 auto 2rem; /* Centered */
    box-shadow:
        0 8px 32px rgba(0, 0, 0, 0.5),
        /* Deep drop shadow */ 0 0 0 1px rgba(196, 183, 235, 0.08); /* Subtle outline ring */
}
/* Terminal title bar — macOS-style with red/yellow/green "traffic light"
   dots. The gradient background gives it a slight sheen left to right. */
.terminal-header {
    background: linear-gradient(90deg, #2a2240, #322a4a);
    padding: 0.6rem 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    border-bottom: 2px solid var(--stone-dark);
}
/* Traffic light dots — styled after macOS close/minimize/maximize buttons.
   Each dot scales up and glows on hover for interactivity feedback.
   "currentColor" in box-shadow means the glow matches the dot's color. */
.terminal-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%; /* Perfect circle */
    display: inline-block;
    cursor: pointer;
    transition:
        transform 0.15s,
        box-shadow 0.15s;
}
.terminal-dot:hover {
    transform: scale(1.4);
    box-shadow: 0 0 6px currentColor; /* Glow in the dot's own color */
}
.terminal-dot.dot-red {
    background: var(--redstone); /* Close button */
}
.terminal-dot.dot-yellow {
    background: var(--yellow); /* Minimize button */
}
.terminal-dot.dot-green {
    background: var(--mint); /* Maximize button */
}
.terminal-title {
    font-size: 0.95rem;
    color: var(--stone-light);
    margin-left: 0.5rem;
}
.terminal-body {
    padding: 2rem 2.5rem;
    text-align: center;
}
/* Command-line prompt area — dark inset box that looks like a terminal
   input line. The subtle border and background create visual depth. */
.terminal-line {
    display: flex;
    align-items: flex-start;
    gap: 0.6rem;
    text-align: left;
    margin: 1.2rem 0;
    padding: 0.8rem 1rem;
    background: rgba(0, 0, 0, 0.35); /* Darkened inset */
    border: 1px solid rgba(196, 183, 235, 0.1); /* Faint outline */
    border-radius: 6px;
}
/* The ">" prompt symbol — uses pixel font, flex-shrink: 0 prevents it
   from being squeezed when the text next to it is long. */
.terminal-prompt {
    color: var(--mint);
    font-family: "Press Start 2P", cursive;
    font-size: 0.7rem;
    flex-shrink: 0;
    margin-top: 2px; /* Visually align with taller VT323 text */
}
/* Typewriter text area — JS types characters into this element one by
   one with a blinking cursor (see .typewriter-active::after below). */
.terminal-text {
    font-size: 1.2rem;
    color: var(--iron);
    line-height: 1.6;
}
/* Landing page title — the main "LASER DEFENDER" heading.
   Double text-shadow creates a layered 3D effect:
   Layer 1 (3px offset): dark shadow for depth
   Layer 2 (6px offset): semi-transparent redstone for a warm glow
   Together they give the title a "floating above the surface" look
   with a colored ambient shadow. */
.landing-title {
    font-family: "Press Start 2P", cursive;
    font-size: 2.5rem;
    color: var(--lavender);
    text-shadow:
        3px 3px 0 var(--dirt-dark),
        /* Hard dark shadow */ 6px 6px 0 rgba(232, 141, 141, 0.5); /* Soft red ambient glow */
    line-height: 1.6;
    margin-bottom: 0.5rem;
}
/* Subtitle — small, widely spaced text (letter-spacing: 6px) for a
   retro subtitle/tagline feel. */
.landing-subtitle {
    font-family: "Press Start 2P", cursive;
    font-size: 0.65rem;
    color: var(--peach);
    letter-spacing: 6px; /* Wide tracking for retro subtitle style */
    margin-bottom: 0.5rem;
}
/* CTA (Call-to-Action) button row — centers play and secondary buttons */
.landing-cta-row {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap; /* Stack buttons on narrow screens */
    margin-top: 1.5rem;
}

/* ═══════════════════════════════════════════════
   BUTTONS — Pixel-art styled action buttons

   3D PIXEL-ART BUTTON TECHNIQUE:
   The "raised button" look comes from three layers:

   1. border-color with 4 different sides:
      - Top & Left (emerald-dark): lighter "highlight" edges
      - Bottom & Right (dirt): darker "shadow" edges
      This creates the classic pixel-art beveled/embossed appearance,
      just like buttons in Windows 95 or SNES game menus.

   2. box-shadow: 0 4px 0 — a hard shadow below the button that acts
      as the "depth" of the button sitting above the surface.

   3. :active state shifts: translateY(2px) pushes the button "down"
      and box-shadow shrinks from 4px to 2px, simulating the button
      being physically pressed into the surface. The total visual
      shift equals the shadow change, so it feels mechanically correct.

   :hover lifts the button UP by 2px for a "ready to press" feedback.
   ═══════════════════════════════════════════════ */
.action-btn {
    font-family: "Press Start 2P", cursive;
    font-size: 1rem;
    padding: 0.8rem 1.5rem;
    background: var(--emerald);
    color: #1e1830; /* Dark text on bright button */
    border: 4px solid;
    /* 3D bevel: top-left highlight / bottom-right shadow
       Order: top | right | bottom | left */
    border-color: var(--emerald-dark) var(--dirt) var(--dirt)
        var(--emerald-dark);
    box-shadow: 0 4px 0 var(--dirt-dark); /* Hard shadow = button depth */
    cursor: pointer;
    margin-top: 1.5rem;
    transition: all 0.1s; /* Snappy press/release feel */
    text-transform: uppercase;
    text-decoration: none;
    display: inline-block; /* Allows transform on <a> tags */
}
/* Hover: lift up slightly, color shifts to cyan */
.action-btn:hover {
    background: var(--cyan);
    transform: translateY(-2px);
}
/* Active/pressed: push down, reduce shadow to simulate depression */
.action-btn:active {
    box-shadow: 0 2px 0 var(--dirt-dark);
    transform: translateY(2px);
}
/* Red variant — used for destructive/danger actions (e.g., reset scores) */
.action-btn.red {
    background: var(--redstone);
    border-color: #cc6666 var(--dirt) var(--dirt) #cc6666;
}
.action-btn.red:hover {
    background: #f0a0a0;
}
/* Landing page specific button overrides.
   !important is needed here to override the base .action-btn styles
   since these are applied alongside .action-btn as compound classes. */
.landing-play-btn {
    background: var(--mint) !important;
    color: #1a1625 !important;
    border-color: var(--emerald-dark) var(--dirt) var(--dirt)
        var(--emerald-dark) !important;
}
/* Play button hover: extra lift (-3px vs -2px) and a lavender glow
   to make it feel like the primary CTA (call-to-action). */
.landing-play-btn:hover {
    background: var(--lavender) !important;
    transform: translateY(-3px);
    box-shadow:
        0 6px 0 var(--dirt-dark),
        0 0 20px rgba(196, 183, 235, 0.3) !important;
}
/* Secondary/ghost button — transparent background with lavender border.
   Used for non-primary actions like "About" or "Leaderboard." */
.landing-secondary-btn {
    background: transparent !important;
    color: var(--lavender) !important;
    border-color: var(--lavender) !important;
    box-shadow: 0 4px 0 rgba(196, 183, 235, 0.3) !important;
}
.landing-secondary-btn:hover {
    background: rgba(196, 183, 235, 0.12) !important;
    transform: translateY(-2px);
}

/* ═══════════════════════════════════════════════
   SECTION HEADERS — Reusable section title blocks
   Used at the top of stats, quests, controls, about, etc.
   ═══════════════════════════════════════════════ */
.section-header {
    text-align: center;
    margin-bottom: 2rem;
}
.section-title {
    font-family: "Press Start 2P", cursive;
    font-size: 1.2rem;
    color: var(--gold);
    text-shadow: 2px 2px 0 var(--dirt-dark); /* Pixel offset shadow */
    margin-bottom: 0.5rem;
    text-transform: uppercase;
    letter-spacing: 2px; /* Spaced out for a retro display feel */
}
/* Decorative divider line — gradient from transparent on both edges
   to solid stone in the center, creating a smooth fade-in/fade-out bar. */
.section-divider {
    width: 200px;
    height: 4px;
    margin: 0.5rem auto 0;
    background: linear-gradient(90deg, transparent, var(--stone), transparent);
}
/* Small tag/label above section titles (e.g., "// STATS", "// QUESTS") */
.section-tag {
    display: inline-block;
    font-size: 0.95rem;
    color: var(--peach);
    background: rgba(247, 197, 168, 0.1); /* Tinted background */
    border: 1px solid rgba(247, 197, 168, 0.25);
    padding: 0.2rem 0.8rem;
    border-radius: 4px;
    letter-spacing: 2px;
    margin-bottom: 0.5rem;
}

/* ═══════════════════════════════════════════════
   STATS — Animated counter cards
   Displays key metrics (total score, games played, etc.) in a
   responsive grid. Values are animated by JS counting up from 0.
   ═══════════════════════════════════════════════ */
.stats {
    margin-bottom: 3rem;
}
/* AUTO-FIT RESPONSIVE GRID PATTERN:
   repeat(auto-fit, minmax(180px, 1fr)) is a powerful CSS Grid technique:
   - auto-fit: creates as many columns as will fit in the container
   - minmax(180px, 1fr): each column is at least 180px wide but can
     grow equally (1fr) to fill remaining space
   Result: on wide screens you get 4-5 columns; on narrow screens the
   columns automatically wrap to fewer per row (down to 1 on mobile)
   without needing any media queries. */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 1.5rem;
}
/* Individual stat card — pixel-art border box.
   Hover: shifts up-left by 2px to simulate "lifting" off the surface,
   plus border turns gold for highlight. */
.stat-card {
    background: var(--dirt);
    border: 4px solid var(--stone-dark);
    padding: 1.5rem;
    text-align: center;
    transition:
        transform 0.2s,
        border-color 0.2s;
}
.stat-card:hover {
    transform: translate(-2px, -2px); /* Lift up-left */
    border-color: var(--gold); /* Highlight border */
}
.stat-value {
    font-family: "Press Start 2P", cursive;
    font-size: 2.5rem;
    color: var(--emerald);
    text-shadow: 2px 2px 0 var(--dirt-dark);
    margin-bottom: 0.5rem;
}
.stat-label {
    font-size: 1rem;
    color: var(--cyan);
}

/* ═══════════════════════════════════════════════
   QUEST CARDS — Feature highlights grid
   Each card represents a game feature ("quest") with a colored left
   accent border. Uses the same auto-fit minmax pattern as stats-grid.
   ═══════════════════════════════════════════════ */
.features {
    margin-bottom: 3rem;
}
/* Same auto-fit responsive grid as stats, but with a larger minimum
   (260px) because quest cards contain more text content. */
.quest-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 1.5rem;
}
/* Quest card base: semi-transparent background lets the body's
   checkerboard/starfield subtly show through. The thick border-left
   acts as a color-coded accent stripe (like a Kanban card priority). */
.quest-card {
    background: rgba(30, 24, 48, 0.8);
    border: 3px solid var(--stone-dark);
    border-left: 5px solid var(--lavender); /* Default accent color */
    border-radius: 8px;
    padding: 1.4rem;
    transition:
        transform 0.2s,
        border-color 0.2s,
        box-shadow 0.2s;
    overflow: hidden;
}
/* Hover: lift effect with a hard pixel-art drop shadow */
.quest-card:hover {
    transform: translate(-2px, -4px);
    box-shadow: 4px 6px 0 rgba(0, 0, 0, 0.3);
}
/* NTH-CHILD ACCENT COLORS:
   Each quest card gets a unique left-border color via :nth-child().
   This avoids adding color classes to every card in HTML — the CSS
   automatically assigns colors based on DOM order. On hover, the
   ENTIRE border shifts to that card's accent color for emphasis.
   Colors cycle through: lavender, mint, peach, pink, blue, redstone. */
.quest-card:nth-child(1) {
    border-left-color: var(--lavender);
}
.quest-card:nth-child(2) {
    border-left-color: var(--mint);
}
.quest-card:nth-child(3) {
    border-left-color: var(--peach);
}
.quest-card:nth-child(4) {
    border-left-color: var(--pink);
}
.quest-card:nth-child(5) {
    border-left-color: var(--blue);
}
.quest-card:nth-child(6) {
    border-left-color: var(--redstone);
}
/* Hover: entire border takes on the card's accent color */
.quest-card:nth-child(1):hover {
    border-color: var(--lavender);
}
.quest-card:nth-child(2):hover {
    border-color: var(--mint);
}
.quest-card:nth-child(3):hover {
    border-color: var(--peach);
}
.quest-card:nth-child(4):hover {
    border-color: var(--pink);
}
.quest-card:nth-child(5):hover {
    border-color: var(--blue);
}
.quest-card:nth-child(6):hover {
    border-color: var(--redstone);
}
.quest-number {
    font-family: "Press Start 2P", cursive;
    font-size: 0.5rem;
    color: var(--stone);
    letter-spacing: 2px;
    margin-bottom: 0.4rem;
}
.quest-title {
    font-family: "Press Start 2P", cursive;
    font-size: 0.75rem;
    color: var(--gold);
    margin-bottom: 0.6rem;
}
.quest-desc {
    font-size: 1.05rem;
    color: var(--stone-light);
    line-height: 1.5;
}

/* ═══════════════════════════════════════════════
   CONTROLS — Keybinding reference cards
   Shows players which keys do what (WASD movement, Space to shoot, etc.)
   Each control panel contains a title and styled keyboard key icons.
   ═══════════════════════════════════════════════ */
.controls {
    margin-bottom: 3rem;
}
.controls-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
}
.control-panel {
    background: var(--dirt);
    border: 4px solid var(--stone-dark);
    padding: 1.5rem;
    text-align: center;
    transition: border-color 0.2s;
}
.control-panel:hover {
    border-color: var(--cyan);
}
.control-title {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    margin-bottom: 1rem;
    font-size: 1.2rem;
    color: var(--gold);
}
.control-label {
    font-family: "Press Start 2P", cursive;
    font-size: 0.8rem;
    text-transform: uppercase;
}
.key-display {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: wrap;
}
/* Keyboard key icon — uses the same 3D bevel border technique as buttons:
   lighter color on top-left edges, darker on bottom-right, creating a
   raised keycap appearance like a physical keyboard key. */
.key {
    display: inline-block;
    padding: 0.4rem 0.8rem;
    background: var(--stone);
    color: #000;
    border: 2px solid;
    border-color: var(--stone-dark) var(--dirt) var(--dirt) var(--stone-dark);
    font-family: "Press Start 2P", cursive;
    font-size: 0.8rem;
    min-width: 50px;
    text-align: center;
}
/* "or" / descriptive text between keys */
.key-sub {
    color: #aaa;
    font-size: 0.9rem;
}
/* Wider key for spacebar or other long key labels */
.key-large {
    min-width: 140px;
}

/* ═══════════════════════════════════════════════
   ABOUT PAGE — Story, tech stack, credits
   Contains the game's narrative backstory, a tech stack grid,
   and credits/attribution info.
   ═══════════════════════════════════════════════ */
.about-section {
    margin-bottom: 3rem;
}
.story-box {
    background: rgba(0, 0, 0, 0.5);
    border: 4px solid var(--stone-dark);
    padding: 2rem;
    position: relative; /* For the ::after star */
    overflow: hidden;
}
/* Floating star decoration — a gold unicode star that bobs up and down
   using the "float" keyframe animation. Positioned at the top-right
   corner of the story box as a decorative accent. */
.story-box::after {
    content: "\2605"; /* Unicode filled star character */
    position: absolute;
    top: -5px;
    right: 15px;
    font-size: 2rem;
    color: var(--gold);
    animation: float 2s ease-in-out infinite;
}
.credits-box {
    display: inline-block;
    max-width: 600px;
}
.tech-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
}
.tech-card {
    background: var(--dirt);
    border: 4px solid var(--stone-dark);
    padding: 1.5rem;
    text-align: center;
    transition:
        transform 0.2s,
        border-color 0.2s;
}
.tech-card:hover {
    transform: translate(-2px, -2px);
    border-color: var(--emerald);
}
.tech-icon {
    font-size: 3rem;
    margin-bottom: 0.8rem;
}
.tech-name {
    font-family: "Press Start 2P", cursive;
    font-size: 0.7rem;
    color: var(--gold);
    margin-bottom: 0.5rem;
}
.tech-desc {
    font-size: 1rem;
    color: #bbb;
    line-height: 1.4;
}

/* ═══════════════════════════════════════════════
   LEADERBOARD — Score table and stats
   Displays a ranked table of player high scores stored in localStorage.
   The table is built dynamically by JS from saved score data.
   ═══════════════════════════════════════════════ */
.leaderboard-container {
    margin-bottom: 3rem;
}
.leaderboard-actions {
    text-align: center;
    margin-top: 2rem;
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
}
/* border-collapse: collapse merges adjacent cell borders into single
   lines instead of the default double-border look. */
.leaderboard-table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 1.5rem;
}
/* Table headers: small pixel font, gold color, thick bottom border */
.leaderboard-table th {
    font-family: "Press Start 2P", cursive;
    font-size: 0.6rem;
    color: var(--gold);
    padding: 1rem 0.5rem;
    border-bottom: 4px solid var(--stone-dark); /* Thick divider */
    text-align: left;
}
.leaderboard-table td {
    padding: 0.8rem 0.5rem;
    border-bottom: 2px solid var(--dirt-dark); /* Thinner row divider */
    font-size: 1.1rem;
    color: #ddd;
}
/* Subtle gold tint on row hover for readability */
.leaderboard-table tr:hover td {
    background: rgba(240, 200, 90, 0.05);
}
/* RANK MEDAL COLORS — Top 3 ranks get special colors mimicking
   real medal tiers: gold (1st), silver/iron (2nd), bronze (3rd).
   All other ranks use the default emerald color. */
.leaderboard-table .rank {
    font-family: "Press Start 2P", cursive;
    color: var(--emerald); /* Default rank color (4th place onward) */
    font-size: 0.9rem;
}
.leaderboard-table .rank-1 {
    color: var(--gold); /* 1st place: gold medal */
}
.leaderboard-table .rank-2 {
    color: var(--iron); /* 2nd place: silver medal */
}
.leaderboard-table .rank-3 {
    color: #cd7f32; /* 3rd place: bronze medal (#cd7f32) */
}
.leaderboard-table .player-score {
    font-family: "Press Start 2P", cursive;
    color: var(--gold);
    font-size: 0.8rem;
}
/* Empty state — shown when no scores are saved yet.
   Provides visual feedback and a prompt to play the game. */
.empty-state {
    text-align: center;
    padding: 3rem;
    background: var(--dirt);
    border: 4px solid var(--stone-dark);
}
.empty-state .empty-icon {
    font-size: 4rem;
    margin-bottom: 1rem;
}
.empty-state p {
    font-size: 1.2rem;
    color: #aaa;
    margin-bottom: 0.5rem;
}

/* ═══════════════════════════════════════════════
   ACHIEVEMENTS — Badge grid with unlock states
   Displays game achievements as collectible badge cards. Each badge
   has two visual states: locked (grayed out) and unlocked (glowing).
   State classes (.locked / .unlocked) are toggled by JS based on
   player progress stored in localStorage.
   ═══════════════════════════════════════════════ */
.achievement-section {
    margin-bottom: 3rem;
}
/* auto-fill (not auto-fit) is used here: it creates as many 150px+
   columns as possible but does NOT collapse empty tracks. This means
   badges maintain consistent sizing even if there are only a few. */
.achievement-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 1rem;
}
.achievement-badge {
    background: var(--dirt);
    border: 3px solid var(--stone-dark);
    padding: 1rem 0.8rem;
    text-align: center;
    position: relative; /* For the ::after checkmark */
    transition:
        transform 0.2s,
        border-color 0.2s,
        box-shadow 0.2s;
}
/* UNLOCKED STATE: Gold border + warm glow shadow signals achievement
   earned. The glow uses rgba gold at low alpha for a soft halo effect. */
.achievement-badge.unlocked {
    border-color: var(--gold);
    box-shadow: 0 0 10px rgba(240, 200, 90, 0.25);
}
/* Unlocked hover: intensified glow + pixel-art lift */
.achievement-badge.unlocked:hover {
    transform: translate(-2px, -2px);
    box-shadow: 0 0 18px rgba(240, 200, 90, 0.45);
}
/* LOCKED STATE: Low opacity + heavy grayscale filter makes the badge
   look "disabled" / unearned. The combination of both effects creates
   a clearly distinct locked appearance without needing separate assets. */
.achievement-badge.locked {
    opacity: 0.38; /* Dimmed out */
    filter: grayscale(80%); /* Nearly monochrome */
}
/* Checkmark indicator on unlocked badges — small emerald "check"
   in the top-right corner confirms the achievement is earned. */
.achievement-badge.unlocked::after {
    content: "\2713"; /* Unicode checkmark */
    position: absolute;
    top: 5px;
    right: 8px;
    font-family: "Press Start 2P", cursive;
    font-size: 0.5rem;
    color: var(--emerald);
}
.achievement-icon {
    font-size: 2.2rem;
    margin-bottom: 0.4rem;
}
.achievement-name {
    font-family: "Press Start 2P", cursive;
    font-size: 0.45rem;
    color: var(--gold);
    margin-bottom: 0.35rem;
    line-height: 1.5;
}
.achievement-desc {
    font-size: 0.85rem;
    color: #aaa;
    line-height: 1.3;
}

/* ═══════════════════════════════════════════════
   FOOTER
   Three-column grid layout (nav links, info, social) that collapses
   to single-column on mobile via the auto-fit pattern.
   ═══════════════════════════════════════════════ */
.pixel-footer {
    border-top: 4px solid var(--stone-dark); /* Pixel-art top divider */
    background: var(--dirt-dark); /* Darkest background to anchor the page */
    padding: 2rem;
    text-align: center;
}
.footer-content {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    max-width: 1000px;
    margin: 0 auto;
}
.footer-section {
    text-align: center;
}
.footer-section h4 {
    font-family: "Press Start 2P", cursive;
    font-size: 0.6rem;
    color: var(--gold);
    margin-bottom: 0.8rem;
}
.footer-links {
    list-style: none;
}
.footer-links li {
    margin-bottom: 0.4rem;
}
.footer-links a {
    color: var(--stone-light);
    text-decoration: none;
    font-size: 1rem;
    transition: color 0.15s;
    cursor: pointer;
}
.footer-links a:hover {
    color: var(--emerald);
}
.footer-text {
    font-size: 1rem;
    color: #ccc;
    margin-bottom: 0.5rem;
}
.footer-text.small {
    font-size: 0.9rem;
    color: #999;
}
.footer-bottom {
    margin-top: 1.5rem;
    padding-top: 1rem;
    border-top: 2px solid var(--stone-dark);
    font-size: 0.9rem;
    color: #777;
}

/* ═══════════════════════════════════════════════
   PERSONAL BEST BANNER
   Displays the player's highest score on the leaderboard page.
   Has two visual states: with a score (emerald glow) and without
   (.no-score — muted, no glow).
   ═══════════════════════════════════════════════ */
.personal-best-banner {
    background: linear-gradient(
        90deg,
        rgba(126, 200, 160, 0.12),
        /* Emerald tint left */ rgba(137, 212, 207, 0.12) /* Cyan tint right */
    );
    border: 3px solid var(--emerald);
    padding: 0.7rem 1.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1.5rem;
    flex-wrap: wrap;
    margin: 1rem 0 1.5rem;
    box-shadow: 0 0 12px rgba(126, 200, 160, 0.2); /* Soft emerald glow */
}
.personal-best-banner .pb-label {
    font-family: "Press Start 2P", cursive;
    font-size: 0.5rem;
    color: var(--emerald);
}
.personal-best-banner .pb-value {
    font-family: "Press Start 2P", cursive;
    font-size: 0.95rem;
    color: var(--gold);
    text-shadow: 1px 1px 0 #000;
}
/* No-score state: muted appearance when no personal best exists yet.
   Removes the glow and uses neutral colors instead of emerald. */
.personal-best-banner.no-score {
    border-color: var(--stone-dark);
    background: rgba(0, 0, 0, 0.3);
    box-shadow: none;
}
.personal-best-banner.no-score .pb-label {
    color: var(--stone-light);
}

/* ═══════════════════════════════════════════════
   PIXEL DECORATIONS — Floating tile patterns
   Five unique 64x64 decorative tiles used on the landing page hero.
   Each uses layered linear-gradients to create pixel-grid patterns
   reminiscent of Minecraft block textures.

   The technique: two orthogonal (90deg + 0deg) or angled (90deg + 45deg)
   gradients draw colored lines at regular intervals. Together they
   form grid, crosshatch, or stripe patterns. background-size controls
   the tile repeat frequency.

   Each decoration uses a different animation (float or pulse) with
   varied durations and delays so they bob independently, creating
   organic movement rather than synchronized motion.
   ═══════════════════════════════════════════════ */
/* Deco 1: Emerald grid pattern (horizontal + vertical lines) — slow float */
.deco-1 {
    background:
        linear-gradient(90deg, var(--emerald) 4px, transparent 4px),
        linear-gradient(0deg, var(--emerald) 4px, transparent 4px);
    background-size: 16px 16px;
    background-color: var(--dirt);
    border: 2px solid var(--stone-dark);
    animation: float 4s ease-in-out infinite;
}
/* Deco 2: Cyan horizontal + magenta diagonal crosshatch — offset float */
.deco-2 {
    background:
        linear-gradient(90deg, var(--cyan) 4px, transparent 4px),
        linear-gradient(45deg, var(--magenta) 2px, transparent 2px);
    background-size:
        16px 16px,
        8px 8px;
    background-color: var(--dirt);
    border: 2px solid var(--stone-dark);
    animation: float 3.5s ease-in-out infinite 0.5s; /* 0.5s delay for stagger */
}
/* Deco 3: Gold horizontal + redstone diagonal — fast pulse (warning-like) */
.deco-3 {
    background:
        linear-gradient(90deg, var(--gold) 2px, transparent 2px),
        linear-gradient(45deg, var(--redstone) 2px, transparent 2px);
    background-size: 8px 8px;
    background-color: var(--dirt);
    border: 2px solid var(--stone-dark);
    animation: pulse 1s ease-in-out infinite;
}
/* Deco 4: Yellow grid (horizontal + vertical) — slow float with 1s delay */
.deco-4 {
    background:
        linear-gradient(90deg, var(--yellow) 2px, transparent 2px),
        linear-gradient(0deg, var(--yellow) 2px, transparent 2px);
    background-size: 8px 8px;
    background-color: var(--dirt);
    border: 2px solid var(--stone-dark);
    animation: float 5s ease-in-out infinite 1s;
}
/* Deco 5: Yellow horizontal stripes only — rapid pulse (beacon-like) */
.deco-5 {
    background: linear-gradient(0deg, var(--yellow) 4px, transparent 4px);
    background-size: 8px 12px;
    background-color: var(--dirt);
    border: 2px solid var(--stone-dark);
    animation: pulse 0.6s ease-in-out infinite;
}

/* ═══════════════════════════════════════════════
   KEYFRAME ANIMATIONS
   All reusable @keyframes definitions collected in one section.
   Each is referenced by name in animation properties above.
   ═══════════════════════════════════════════════ */

/* starScroll: Moves the body::after star field upward by exactly 50%
   of its height (which is 200vh, so it moves 100vh). Because the star
   pattern fills 200%, the second half seamlessly replaces the first,
   creating a perfect infinite vertical scroll with no visible seam.
   Duration: 60s linear — slow enough to feel like distant stars drifting. */
@keyframes starScroll {
    to {
        transform: translateY(-50%);
    }
}

/* pulse: Gentle breathing scale effect (1x -> 1.05x -> 1x).
   Used by pixel decorations (deco-3, deco-5) for a subtle "alive" feel.
   The small 5% scale change is noticeable but not distracting. */
@keyframes pulse {
    0%,
    100% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.05);
    }
}

/* float: Vertical bobbing motion (0 -> -10px -> 0).
   Used by pixel decorations and the story-box star. Creates a gentle
   hovering/floating-in-space feel. Negative Y = upward in CSS. */
@keyframes float {
    0%,
    100% {
        transform: translateY(0);
    }
    50% {
        transform: translateY(-10px);
    }
}

/* fadeInUp: Entry animation — element slides up 30px while fading in.
   Used by .fade-in-up utility class for staggered section entrances.
   Applied with "forwards" fill-mode so elements stay visible after. */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* morphIn: SPA page section entrance — similar to fadeInUp but includes
   a subtle scale(0.98 -> 1) for a "morphing into existence" feel.
   Used by .page-section.active for page transitions. */
@keyframes morphIn {
    from {
        opacity: 0;
        transform: translateY(20px) scale(0.98);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* insertCoin: Sharp on/off blink (not a smooth fade). The step-like
   keyframes create a binary visible/invisible toggle:
   - 0-49%: fully visible
   - 50-100%: fully invisible
   Used for the typewriter cursor and "INSERT COIN" style text. */
@keyframes insertCoin {
    0%,
    49% {
        opacity: 1;
    }
    50%,
    100% {
        opacity: 0;
    }
}

/* glitch: Chromatic aberration text effect — offsets cyan and redstone
   text-shadows in opposite directions, then shifts them diagonally
   at 50%. Creates the look of RGB color channels going out of
   alignment, like a damaged CRT or digital glitch artifact.
   Used on the easter egg overlay title. */
@keyframes glitch {
    0%,
    100% {
        text-shadow:
            2px 0 var(--cyan),
            /* Cyan channel offset right */ -2px 0 var(--redstone); /* Red channel offset left */
    }
    50% {
        text-shadow:
            2px 2px var(--cyan),
            /* Shift both axes */ -2px -2px var(--redstone);
    }
}

/* pixelGlow: Oscillating double text-shadow that alternates between
   redstone and cyan glow colors. The shadow offset also grows
   (3px/6px -> 4px/8px) creating a "breathing glow" effect.
   Applied via .pixel-glow utility class. */
@keyframes pixelGlow {
    0%,
    100% {
        text-shadow:
            3px 3px 0 var(--dirt-dark),
            6px 6px 0 var(--redstone);
    }
    50% {
        text-shadow:
            4px 4px 0 var(--dirt-dark),
            8px 8px 0 var(--cyan);
    }
}

/* pauseBlink: Similar to insertCoin but doesn't fully disappear —
   oscillates between opacity 1 and 0.3 (dimmed, not invisible).
   This creates a "pulsing" effect for the PAUSED text that stays
   readable while clearly indicating a paused/waiting state. */
@keyframes pauseBlink {
    0%,
    49% {
        opacity: 1;
    }
    50%,
    100% {
        opacity: 0.3;
    }
}

/* ufoFly: Easter egg idle animation — a UFO element flies across
   the screen from left (-80px, off-screen) to right (100vw + 80px,
   off-screen). Along the way it wobbles vertically (-30px up, +20px
   down) and tilts (rotate -8deg, +6deg) for an organic flight path.
   Opacity fades in at 5% and out at 95% for smooth edge transitions. */
@keyframes ufoFly {
    0% {
        left: -80px;
        opacity: 0;
    }
    5% {
        opacity: 1;
    }
    40% {
        transform: translateY(-30px) rotate(-8deg); /* Bank upward */
    }
    70% {
        transform: translateY(20px) rotate(6deg); /* Dip downward */
    }
    95% {
        opacity: 1;
    }
    100% {
        left: calc(100vw + 80px); /* Exit off right edge */
        opacity: 0;
    }
}

/* rainbowFlash: Quick color flash for the Konami code easter egg.
   Background flashes from red-tinted to blue-tinted then settles
   to near-black, creating a brief "fireworks" color burst effect. */
@keyframes rainbowFlash {
    0% {
        background: rgba(232, 141, 141, 0.3); /* Red flash */
    }
    50% {
        background: rgba(168, 212, 240, 0.3); /* Blue flash */
    }
    100% {
        background: rgba(18, 16, 28, 0.9); /* Settle to dark */
    }
}

/* waveClearAnim: Notification popup for completing a wave in-game.
   4-stage lifecycle:
   0%: invisible, slightly above center, scaled down (entry position)
   20%: pop in with a slight overshoot (scale 1.05 = bounce effect)
   80%: hold visible at normal scale (display duration)
   100%: fade out, drift slightly upward, scale down (exit)
   The translate(-50%, ...) keeps it centered relative to the game canvas. */
@keyframes waveClearAnim {
    0% {
        opacity: 0;
        transform: translate(-50%, -60%) scale(0.8);
    }
    20% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1.05);
    }
    80% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
    }
    100% {
        opacity: 0;
        transform: translate(-50%, -45%) scale(0.95);
    }
}

/* ═══════════════════════════════════════════════
   ANIMATION UTILITY CLASSES
   These classes can be added to any element in HTML to apply
   common animation effects without writing custom CSS.
   ═══════════════════════════════════════════════ */
/* Oscillating color-shift glow on text (cycles redstone/cyan) */
.pixel-glow {
    animation: pixelGlow 2s ease-in-out infinite;
}
/* Fade-in + slide-up entrance. opacity: 0 is the initial state;
   the fadeInUp keyframe animates it to 1. "forwards" fill-mode
   keeps it at opacity: 1 after the animation ends. */
.fade-in-up {
    animation: fadeInUp 0.6s ease-out forwards;
    opacity: 0; /* Start invisible, animation reveals */
}
/* STAGGERED ENTRANCE DELAYS:
   Each :nth-child gets a progressively longer delay (100ms increments).
   When multiple .fade-in-up siblings exist (e.g., stat cards or quest
   cards), they cascade in one after another instead of all appearing
   at once, creating a pleasing "wave" entrance effect.
   Supports up to 6 children — enough for most grid sections. */
.fade-in-up:nth-child(1) {
    animation-delay: 0.1s;
}
.fade-in-up:nth-child(2) {
    animation-delay: 0.2s;
}
.fade-in-up:nth-child(3) {
    animation-delay: 0.3s;
}
.fade-in-up:nth-child(4) {
    animation-delay: 0.4s;
}
.fade-in-up:nth-child(5) {
    animation-delay: 0.5s;
}
.fade-in-up:nth-child(6) {
    animation-delay: 0.6s;
}
/* Blinking block cursor for typewriter effect.
   The "block" character (U+2588) is appended via ::after.
   insertCoin keyframe makes it blink on/off with "step-end" timing
   (hard toggle, not smooth fade) to mimic a real terminal cursor. */
.typewriter-active::after {
    content: "\2588"; /* Full block character */
    animation: insertCoin 0.8s step-end infinite;
    color: var(--emerald);
}

/* ═══════════════════════════════════════════════
   EASTER EGG OVERLAY (Konami Code)
   Triggered when the player enters the classic Konami code
   (up up down down left right left right B A). Shows a full-screen
   overlay with a secret message. The rainbowFlash animation plays
   on entry for a celebratory color burst before settling to dark.
   ═══════════════════════════════════════════════ */
.easter-egg-overlay {
    position: fixed;
    inset: 0;
    z-index: 99999; /* Above everything except boot screen */
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.9);
    animation: rainbowFlash 0.3s ease-in-out; /* Entry color flash */
}
.easter-egg-content {
    text-align: center;
    animation: fadeInUp 0.5s ease-out;
}
.easter-egg-content h2 {
    font-family: "Press Start 2P", cursive;
    font-size: 1.5rem;
    color: var(--gold);
    margin-bottom: 1rem;
    animation: glitch 0.3s ease-in-out infinite;
}
.easter-egg-content p {
    font-size: 1.3rem;
    color: var(--cyan);
    margin-bottom: 1.5rem;
}

/* ═══════════════════════════════════════════════
   SCROLL-TO-TOP BUTTON
   Fixed bottom-right button that appears after scrolling down.
   JS toggles the .visible class based on scroll position.
   Initially hidden (opacity:0, pointer-events:none) so it does
   not interfere with clicks or appear before needed.
   ═══════════════════════════════════════════════ */
.scroll-top-btn {
    position: fixed;
    bottom: 1.5rem;
    right: 1.5rem;
    z-index: 5000;
    background: var(--dirt);
    border: 3px solid var(--stone-dark);
    color: var(--gold);
    font-family: "Press Start 2P", cursive;
    font-size: 0.6rem;
    padding: 0.5rem 0.7rem;
    cursor: pointer;
    box-shadow: 3px 3px 0 var(--dirt-dark);
    transition: all 0.15s;
    opacity: 0; /* Hidden by default */
    pointer-events: none; /* Non-clickable when hidden */
    transform: translateY(10px); /* Slightly below final position */
}
/* Visible state: slides up into place and becomes clickable */
.scroll-top-btn.visible {
    opacity: 1;
    pointer-events: auto;
    transform: translateY(0);
}
.scroll-top-btn:hover {
    background: var(--stone-dark);
    color: var(--emerald);
    border-color: var(--emerald);
    transform: translateY(-2px);
}

/* ═══════════════════════════════════════════════
   CUSTOM SCROLLBAR
   WebKit-only (Chrome, Safari, Edge) scrollbar styling.
   Firefox uses scrollbar-color/scrollbar-width instead (not styled here).

   The scrollbar matches the pixel-art aesthetic:
   - Track: dark dirt background with a stone-dark left border (like a
     recessed channel in the UI)
   - Thumb: stone-colored with the same 3D bevel border technique used
     on buttons (lighter top-left, darker bottom-right)
   - Hover: thumb turns gold to match the primary accent color
   ═══════════════════════════════════════════════ */
::-webkit-scrollbar {
    width: 16px; /* Wide enough to feel like a retro UI element */
}
::-webkit-scrollbar-track {
    background: var(--dirt);
    border-left: 4px solid var(--stone-dark); /* Recessed channel edge */
}
/* Thumb uses the same 3D bevel as buttons for visual consistency */
::-webkit-scrollbar-thumb {
    background: var(--stone);
    border: 2px solid;
    border-color: var(--stone-dark) var(--dirt) var(--dirt) var(--stone-dark);
}
::-webkit-scrollbar-thumb:hover {
    background: var(--gold); /* Highlight on interaction */
}

/* ═══════════════════════════════════════════════
   GAME ENGINE UI
   Canvas wrapper, HUD panels, overlays.

   Z-INDEX LAYERING (within #gameContainer):
   - Canvas: base layer (z-index: auto)
   - HUD panels (#ui, .ui-difficulty): z-index: 10
   - Game Over dialog (#gameOver): z-index: 100
   - Pause overlay (#pauseOverlay): z-index: 150
   - Difficulty select (#difficultyScreen): z-index: 200
   - Wave clear notification: z-index: 300

   This layering ensures overlays stack correctly — difficulty select
   covers pause, which covers game over, which covers HUD.
   ═══════════════════════════════════════════════ */

/* Game section layout — vertically centers the game canvas within
   the viewport (minus the 52px nav bar). */
.game-wrapper {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: calc(100vh - 52px); /* Full viewport minus nav height */
    padding: 2rem 1rem;
    overflow: hidden; /* Prevent canvas overflow on small screens */
}

/* Game container — holds the canvas and all game overlays.
   "contain: layout style paint" is a performance optimization that tells
   the browser this element's internals won't affect the rest of the page,
   enabling rendering isolation (similar to will-change but more explicit).

   The multi-layer box-shadow creates an elaborate pixel-art frame:
   1. 0 0 0 4px #1e1830 — 4px solid dark ring (inner frame)
   2. 0 0 0 8px #2d2438 — 4px dirt-colored ring (outer frame)
   3. 8px 8px 0 rgba(0,0,0,0.5) — drop shadow for depth */
#gameContainer {
    position: relative; /* Establishes positioning context for overlays */
    contain: layout style paint; /* Rendering isolation for performance */
    border: 4px solid;
    border-color: #9e95a8 #6e6580 #6e6580 #9e95a8; /* 3D bevel frame */
    box-shadow:
        0 0 0 4px #1e1830,
        /* Inner dark ring */ 0 0 0 8px #2d2438,
        /* Outer dirt ring */ 8px 8px 0 rgba(0, 0, 0, 0.5); /* Drop shadow */
}
/* Diagonal stripe frame — extends 12px outside the container as a
   decorative border, like a picture frame with hatched matting. */
#gameContainer::before {
    content: "";
    position: absolute;
    inset: -12px; /* 12px outside the container on all sides */
    background: repeating-linear-gradient(
        45deg,
        #2d2438 0 4px,
        transparent 4px 8px
    );
    pointer-events: none; /* Non-interactive decoration */
    z-index: -1; /* Behind the game canvas */
    border: 4px solid #1e1830;
}

/* Main game canvas — where the actual game renders via JS Canvas API.
   image-rendering: pixelated keeps sprite edges crisp when the canvas
   is scaled (CSS size larger than the canvas pixel dimensions).
   The dark green gradient background shows when nothing is drawn yet.
   will-change: contents hints to the browser that canvas pixels change
   every frame, encouraging GPU compositing for smooth rendering. */
canvas#game {
    display: block; /* Removes inline element baseline gap */
    image-rendering: pixelated; /* Crisp pixel art, no bilinear blur */
    background: linear-gradient(180deg, #0f1a0f, #081008); /* Space green */
    will-change: contents; /* GPU optimization for frequent redraws */
}

/* HUD (Heads-Up Display) — positioned absolutely inside #gameContainer.
   Top-left panel shows score, lives, and wave info. Positioned
   absolutely so it overlays the canvas without affecting layout. */
#ui {
    position: absolute;
    top: 10px;
    left: 10px;
    z-index: 10; /* Above canvas, below game overlays */
}
/* Individual HUD panel box — semi-transparent with 3D bevel border */
.ui-panel {
    background: rgba(26, 22, 40, 0.9); /* 90% opaque for readability */
    border: 3px solid;
    border-color: #9e95a8 #6e6580 #6e6580 #9e95a8; /* 3D bevel */
    padding: 10px 15px;
    margin-bottom: 8px;
    box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
}
.ui-label {
    font-family: "Press Start 2P", monospace;
    font-size: 10px;
    color: #c4b8d0; /* Muted label text */
    margin-bottom: 4px;
}
/* Value readout — color-coded: green (default), red (lives), gold (score) */
.ui-value {
    font-family: "Press Start 2P", monospace;
    font-size: 14px;
    color: #7ec8a0; /* Default: emerald green */
    transition: all 0.2s;
}
.ui-value.lives {
    color: #e88d8d; /* Red for lives — danger indicator */
}
.ui-value.score {
    color: #f0c85a; /* Gold for score — reward indicator */
}
/* Flash effect — JS temporarily adds .flash when the value changes
   (score increase, life lost). Scales up 1.3x with a glow to draw
   the player's eye. "currentColor" makes the glow match the value's
   color (gold for score, red for lives, etc.) */
.ui-value.flash {
    transform: scale(1.3);
    text-shadow: 0 0 10px currentColor;
}
/* Difficulty/time panel — anchored to top-right of the game container,
   mirroring the top-left HUD for balanced layout. */
.ui-difficulty {
    position: absolute;
    top: 10px;
    right: 10px;
    z-index: 10;
}
.ui-value--mode {
    color: #f0c85a;
    font-size: 10px;
}
.ui-value--time {
    color: #89d4cf;
    font-size: 10px;
}
.ui-value--wave {
    color: #d4a0d8;
    font-size: 14px;
}

/* Difficulty selection overlay — shown before game starts.
   Covers the entire game container (inset: 0 on absolute positioning).
   z-index: 200 puts it above all other game overlays so it's the first
   thing the player interacts with. Hidden by JS after selection. */
#difficultyScreen {
    position: absolute;
    inset: 0;
    background: rgba(18, 16, 28, 0.94); /* Near-opaque dark overlay */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 200; /* Highest game overlay layer */
}
#difficultyScreen h2 {
    font-family: "Press Start 2P", monospace;
    font-size: 20px;
    color: #f0c85a;
    text-shadow: 3px 3px 0 #000;
    margin-bottom: 10px;
}
#difficultyScreen p {
    font-family: "Press Start 2P", monospace;
    font-size: 10px;
    color: #c4b8d0;
    margin-bottom: 25px;
}
/* Difficulty buttons — color-coded to communicate intensity:
   - Easy: mint/teal (calm, safe)
   - Normal: gold/yellow (standard, balanced)
   - Hard: red (danger, challenge)
   Each uses the 3D bevel border technique + press animation. */
.diff-btn {
    display: block;
    width: 220px;
    padding: 15px 20px;
    margin-bottom: 12px;
    background: #1e1830;
    border: 4px solid;
    border-color: #9e95a8 #6e6580 #6e6580 #9e95a8; /* Default bevel */
    color: #e8e0f0;
    font-family: "Press Start 2P", monospace;
    font-size: 12px;
    cursor: pointer;
    text-align: center;
    transition: all 0.1s;
    box-shadow: 0 4px 0 #1e1830;
}
/* Hover: lift up, shadow grows */
.diff-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 0 #1e1830;
}
/* Active: press down hard (4px), shadow disappears (button is "flush") */
.diff-btn:active {
    transform: translateY(4px);
    box-shadow: 0 0 0 #1e1830;
}
/* Easy: mint/teal color theme with tinted hover background */
.diff-btn.easy {
    border-color: #98d8c8 #6ab8b3 #6ab8b3 #98d8c8;
    color: #98d8c8;
}
.diff-btn.easy:hover {
    background: #1a2a28; /* Dark teal tint */
}
/* Normal: gold color theme */
.diff-btn.normal {
    border-color: #f0c85a #d4ad40 #d4ad40 #f0c85a;
    color: #f0c85a;
}
.diff-btn.normal:hover {
    background: #2a2518; /* Dark gold tint */
}
/* Hard: red/danger color theme */
.diff-btn.hard {
    border-color: #e88d8d #cc6666 #cc6666 #e88d8d;
    color: #e88d8d;
}
.diff-btn.hard:hover {
    background: #2a1818; /* Dark red tint */
}
.diff-desc {
    font-family: "VT323", monospace;
    font-size: 14px;
    color: #c4b8d0;
    margin-top: 4px;
}

/* Pause overlay — shown when the player presses Escape during gameplay.
   display: none by default; JS sets display: flex when pausing.
   z-index: 150 sits above the game-over dialog (100) but below
   the difficulty screen (200). */
#pauseOverlay {
    position: absolute;
    inset: 0;
    background: rgba(18, 16, 28, 0.85); /* Semi-transparent dark scrim */
    display: none; /* Hidden by default, JS toggles to flex */
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 150;
}
/* "PAUSED" text with blinking animation — step-end creates a hard
   toggle (not smooth fade) between opacity 1 and 0.3 */
#pauseOverlay h2 {
    font-family: "Press Start 2P", monospace;
    font-size: 32px;
    color: #f0c85a;
    text-shadow: 4px 4px 0 #000;
    margin-bottom: 20px;
    animation: pauseBlink 1s step-end infinite;
}
#pauseOverlay p {
    font-family: "Press Start 2P", monospace;
    font-size: 12px;
    color: #c4b8d0;
}

/* Game Over dialog — centered modal using the classic
   "position: absolute + top/left: 50% + transform: translate(-50%, -50%)"
   centering technique. This works because translate percentages are
   relative to the element's OWN size, so -50%/-50% shifts it back by
   exactly half its width and height, perfectly centering it.
   display: none by default; JS shows it when the player dies. */
#gameOver {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%); /* Center trick */
    background: #1e1830;
    border: 4px solid;
    border-color: #9e95a8 #6e6580 #6e6580 #9e95a8;
    padding: 30px 25px;
    text-align: center;
    z-index: 100; /* Above HUD, below pause overlay */
    box-shadow: 8px 8px 0 rgba(0, 0, 0, 0.5); /* Heavy drop shadow */
    display: none; /* Hidden until game over */
    min-width: 320px;
}
#gameOver h2 {
    font-family: "Press Start 2P", monospace;
    font-size: 20px;
    color: #e88d8d;
    text-shadow: 3px 3px 0 #000;
    margin-bottom: 15px;
}
/* Final stats rows — displayed in the game-over dialog.
   Shows score breakdown (final score, waves survived, accuracy, etc.)
   in a label: value pair layout using flexbox space-between. */
.final-stats {
    text-align: left;
    margin-bottom: 20px;
    font-family: "VT323", monospace;
}
.stat-row {
    display: flex;
    justify-content: space-between; /* Label on left, value on right */
    padding: 5px 0;
    border-bottom: 1px solid #3f3550;
    font-size: 16px;
}
.stat-row .label {
    color: #c4b8d0;
}
.stat-row .value {
    color: #f0c85a;
}
.stat-row .value.green {
    color: #7ec8a0;
}
/* Player name input row — allows the player to enter their name
   for the leaderboard after a game over. */
.name-input-row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 15px;
    justify-content: center;
}
.name-input-row label {
    font-family: "Press Start 2P", monospace;
    font-size: 10px;
    color: #c4b8d0;
}
#playerName {
    background: #12101c;
    border: 3px solid #6e6580;
    color: #7ec8a0;
    font-family: "Press Start 2P", monospace;
    font-size: 12px;
    padding: 8px 12px;
    width: 150px;
    text-transform: uppercase;
}
#playerName:focus {
    outline: none;
    border-color: #f0c85a;
}
/* Save/retry buttons — used in the game-over dialog.
   Same 3D bevel + press animation pattern as .action-btn and .diff-btn.
   .secondary variant uses muted purple for non-primary actions. */
.go-btn {
    padding: 12px 20px;
    background: #7ec8a0; /* Emerald green = primary action */
    border: 4px solid;
    border-color: #5fa880 #3f8870 #3f8870 #5fa880; /* 3D bevel */
    color: #1e1830;
    font-family: "Press Start 2P", monospace;
    font-size: 11px;
    cursor: pointer;
    box-shadow: 0 4px 0 #3f8870; /* Button depth shadow */
    transition: all 0.1s;
    margin: 4px;
}
.go-btn:hover {
    background: #98d8c8;
    transform: translateY(-2px);
    box-shadow: 0 6px 0 #3f8870;
}
.go-btn:active {
    transform: translateY(4px);
    box-shadow: 0 0 0 #3f8870;
}
/* Secondary variant — muted purple for non-primary actions (e.g., "Retry") */
.go-btn.secondary {
    background: #3f3550;
    border-color: #6e6580 #2d2438 #2d2438 #6e6580;
    box-shadow: 0 4px 0 #2d2438;
    color: #c4b8d0;
}
.go-btn.secondary:hover {
    background: #5a4d70;
}
.btn-row {
    display: flex;
    gap: 8px;
    justify-content: center;
    flex-wrap: wrap;
}
.btn-row + .btn-row {
    margin-top: 8px;
}
#savedMsg {
    color: #7ec8a0;
    font-family: "Press Start 2P", monospace;
    font-size: 10px;
    margin-top: 8px;
    min-height: 1.2em;
}
/* Wave clear notification popup — appears briefly when the player
   clears an enemy wave. Centered in the game container, non-interactive
   (pointer-events: none), and auto-removes via the waveClearAnim
   keyframe (pops in, holds, fades out over 2 seconds).
   z-index: 300 is the highest game layer — visible above everything. */
.wave-clear-notify {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%); /* Center trick */
    background: rgba(0, 0, 0, 0.85);
    border: 3px solid var(--gold);
    padding: 12px 20px;
    font-family: "Press Start 2P", monospace;
    font-size: 14px;
    color: var(--gold);
    text-align: center;
    z-index: 300; /* Highest game overlay layer */
    pointer-events: none; /* Does not block gameplay input */
    animation: waveClearAnim 2s ease-out forwards;
}

/* ═══════════════════════════════════════════════
   RESPONSIVE BREAKPOINTS
   Three breakpoints handle the full range of screen sizes:

   768px — Tablets and small laptops:
     - Font sizes reduced across the board
     - All grids collapse to single-column (1fr)
     - Table cells get tighter padding
     - Game canvas scales to fit screen width

   640px — Small phones (portrait):
     - Horizontal nav links hidden, hamburger menu appears
     - Nav becomes a dropdown overlay
     - Links stack vertically

   480px — Extra small phones:
     - Further font size reductions
     - Terminal padding tightened
   ═══════════════════════════════════════════════ */

/* BREAKPOINT 1: 768px — Tablets and below
   Primary layout shift: all multi-column grids become single-column.
   This is the most impactful breakpoint — content goes from side-by-side
   to stacked vertical layout. */
@media (max-width: 768px) {
    /* Reduce heading sizes for smaller screens */
    .landing-title {
        font-size: 1.8rem; /* Down from 2.5rem */
    }
    .pixel-title {
        font-size: 1rem; /* Down from 1.5rem */
    }
    .section-title {
        font-size: 0.9rem; /* Down from 1.2rem */
    }
    /* Force all grids to single column — the auto-fit minmax pattern
       would eventually do this, but explicitly setting 1fr ensures
       consistent behavior at exactly this breakpoint. */
    .stats-grid,
    .controls-grid,
    .tech-grid,
    .quest-grid {
        grid-template-columns: 1fr;
    }
    .stat-value {
        font-size: 1.8rem; /* Down from 2.5rem */
    }
    /* Tighter table cells for narrow screens */
    .leaderboard-table th,
    .leaderboard-table td {
        padding: 0.5rem 0.3rem;
        font-size: 0.9rem;
    }
    /* Compact nav links */
    .nav-links a {
        padding: 0.6rem;
        font-size: 0.9rem;
    }
    .nav-logo {
        font-size: 0.5rem;
    }
    /* Scale game canvas to fit mobile width while maintaining aspect
       ratio. width: 100% makes it fluid; height: auto preserves the
       canvas aspect ratio. The canvas's internal resolution stays the
       same — CSS just scales the display size. */
    canvas#game {
        width: 100%;
        height: auto;
    }
}

/* BREAKPOINT 2: 640px — Small phones
   Navigation switches from horizontal links to a hamburger dropdown.
   The .nav-hamburger (hidden by default) becomes visible, and
   .nav-links is hidden until JS toggles .open on hamburger click. */
@media (max-width: 640px) {
    /* Show the hamburger button */
    .nav-hamburger {
        display: block;
    }
    /* Hide horizontal nav links — they become a vertical dropdown */
    .nav-links {
        display: none; /* Hidden by default on mobile */
        flex-direction: column;
        position: absolute;
        top: 100%; /* Dropdown appears below the nav bar */
        left: 0;
        right: 0;
        background: rgba(26, 22, 40, 0.98); /* Nearly opaque backdrop */
        border-bottom: 4px solid var(--stone-dark);
        z-index: 9999;
    }
    /* JS adds .open class when hamburger is clicked */
    .nav-links.open {
        display: flex;
    }
    /* In dropdown mode: remove left/right borders, add top borders
       between items, and center-align text */
    .nav-links a {
        border-left: none;
        border-right: none;
        border-top: 1px solid var(--stone-dark);
        text-align: center;
    }
    .nav-links a:last-child {
        border-right: none;
    }
}

/* BREAKPOINT 3: 480px — Extra small phones
   Final size reduction for the smallest screens. */
@media (max-width: 480px) {
    .landing-title {
        font-size: 1.3rem; /* Down from 1.8rem (tablet) / 2.5rem (desktop) */
    }
    .terminal-body {
        padding: 1.5rem 1rem; /* Tighter padding to save space */
    }
}
